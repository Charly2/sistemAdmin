head
    base(href="/")
    meta(http-equiv="Content-Type" content="text/html; charset=UTF-8")
    meta(charset="utf-8")
    meta(http-equiv="X-UA-Compatible" content="IE=edge")
    meta(name="viewport" content="width=device-width, initial-scale=1")
    link(rel="icon" href="images/favicon.ico" type="image/ico")

    title= title

    link(href="/vendor/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet")

    link(href="/vendor/nprogress/nprogress.css" rel="stylesheet")
    link(href="/vendor/iCheck/skins/flat/green.css" rel="stylesheet")
    link(href="/vendor/bootstrap-progressbar/css/bootstrap-progressbar-3.3.4.min.css" rel="stylesheet")
    link(href="/vendor/jqvmap/dist/jqvmap.min.css" rel="stylesheet")
    link(href="/vendor/bootstrap-daterangepicker/daterangepicker.css" rel="stylesheet")
    link(href="/build/css/custom.css" rel="stylesheet")
    link(href="/vendor/pnotify/dist/pnotify.css" rel="stylesheet")
    link(href="/vendor/pnotify/dist/pnotify.buttons.css" rel="stylesheet")
    link(href="/vendor/dropzone/dist/min/dropzone.min.css" rel="stylesheet")
    link(href="/vendor/pnotify/dist/pnotify.nonblock.css" rel="stylesheet")
    link(href="/vendor/datatables.net-fixedheader-bs/css/fixedHeader.bootstrap.min.css" rel="stylesheet")
    //link(href="/fonts/din-pro/style.css" rel="stylesheet" type="text/css")
    style.
        @font-face {
            font-family: 'DIN Pro';
            font-style: normal;
            font-weight: normal;
            src: local('DIN Pro'), url('/fonts/din-pro/DINPro.woff') format('woff');
        }
    link(href="/css/juan.css" rel="stylesheet")



    script(src="../vendor/jquery/dist/jquery.min.js")
    script(src="../vendor/bootstrap/dist/js/bootstrap.min.js")
    script(src="../vendor/fastclick/lib/fastclick.js")
    script(src="../vendor/nprogress/nprogress.js")
    script(src="../vendor/Chart.js/dist/Chart.min.js")
    script(src="https://cdnjs.cloudflare.com/ajax/libs/pnotify/3.2.1/pnotify.js")
    script(src="../vendor/gauge.js/dist/gauge.min.js")
    script(src="../vendor/bootstrap-progressbar/bootstrap-progressbar.min.js")
    script(src="../vendor/iCheck/icheck.min.js")
    script(src="../vendor/skycons/skycons.js")
    script(src="../vendor/Flot/jquery.flot.js")
    script(src="../vendor/Flot/jquery.flot.pie.js")
    script(src="../vendor/Flot/jquery.flot.time.js")
    script(src="../vendor/Flot/jquery.flot.stack.js")
    script(src="../vendor/Flot/jquery.flot.resize.js")
    script(src="../vendor/flot.orderbars/js/jquery.flot.orderBars.js")
    script(src="../vendor/flot-spline/js/jquery.flot.spline.min.js")
    script(src="../vendor/flot.curvedlines/curvedLines.js")
    script(src="../vendor/DateJS/build/date.js")
    script(src="../vendor/jqvmap/dist/jquery.vmap.js")
    script(src="../vendor/jqvmap/dist/maps/jquery.vmap.world.js")
    script(src="../vendor/jqvmap/examples/js/jquery.vmap.sampledata.js")
    script(src="../vendor/moment/min/moment.min.js")
    script(src="../vendor/bootstrap-daterangepicker/daterangepicker.js")
    script(src="../vendor/jquery.inputmask/dist/min/jquery.inputmask.bundle.min.js")
    script(src="../vendor/bootstrap-datetimepicker/build/js/bootstrap-datetimepicker.min.js")
    script(src="../vendor/bootstrap-daterangepicker/daterangepicker.js")

    script(src="../vendor/jQuery-Smart-Wizard/js/jquery.smartWizard.js")

    script(src="/js/notify.js" )

    style.
        body {font-size: 90%;background:white;font-family:'DIN Pro';font-weight:normal;color:black;}
        p, span, h1, h2, h3, h4, .parent, .print-wrap.page1{
            font-family:'DIN Pro'!important;
            font-weight:normal!important;
        }
        tr, th {

        }
        .h1, h1 {
            font-size: 30px;
        }

        .x_panel {
            border: 1px solid white;
        }

        .table > thead > tr > th {
            vertical-align: bottom;
            border-bottom: 0px;
        }
        .table.table1>tbody>tr:first-child >td{
            border-top: 0px!important;
        }

        ul.stats-overview li .name {
            font-size: 9px;
        }
        ul.stats-overview li .value {
            font-size: 9px;
            font-weight: bold;
            display: block;
            color:#337ab7;
        }
        .x_title {
            border-bottom: 0px solid #E6E9ED;
            padding: 0;
            margin-bottom: 0px;
        }
        .x_title h5 {
            margin-left: 1rem;
        }

        .panel-body {
            padding-bottom: 0px;
        }

        .panel {
            margin-bottom: 0px;
        }

        blockquote {
            padding: 10px 20px;
            margin: 0 0 20px;
            font-size: 9px;
        }

        .x_content h4 {
            font-size: 9px;
            font-weight: 500;
        }

        .label {
            display: inline;
            padding: .1em;
            font-size: 65%!important;
        }

        ul.messages li .message_wrapper {
            margin-left: 0px;
            margin-right: 0px;
        }

        ul.messages li, .tasks li {
            border-bottom: 0px dotted #e6e6e6;
            padding: 8px 0;
        }

        ul.messages li .message_wrapper h4.heading {
            font-weight: 600;
            margin: 0;
            cursor: pointer;
            margin-bottom: 2px;
            line-height: 100%;
        }
block content
    div#btns(style="text-align: center;z-index: 100000; position:fixed;bottom:0; left:0; background:#2A3F54; width: 100%; height:50px; display:flex; justify-content:center; align-items:center; padding-left:1rem;")
        button(type="button" class="btn btn-primary" onclick="pdfgen()") Descargar
        button(type="button" class="btn btn-primary" onclick="inpri()") Imprimir
    div(style="").parent
        div(style="width:600px" ).print-wrap.page1#main
            .row
                .col-md-12
                    .x_panel

                        .x_content

                            section.content.invoice
                                // title row
                                .row
                                    .col-xs-12.invoice-header
                                        span(style="display:flex; justify-content:space-between; align-items:center;")
                                            img(src="/images/logo-recibo.png" style="width: 90px;margin-bottom:  40px; ")

                                            h5.pull-right Fecha: 16/03/2018
                                    // /.col

                                    .col-md-12.col-sm-12.col-xs-12
                                        ul.stats-overview
                                            li
                                                span.name  Ultima actualizaci√≥n
                                                span#fec1.value.text-success #{new Date(data.info.fechaini).toLocaleString('en-GB', {timeZone: 'UTC'})}
                                            li
                                                span.name  Fecha de entrega
                                                span#fec2.value.text-success #{new Date(data.info.fechamod).toLocaleString('en-GB', {timeZone: 'UTC'})}
                                            li.hidden-phone
                                                span.name  Estado
                                                span.value.text-success  #{data.info.idestado}
                                    .x_title
                                        h5 #{data.info.nombreReporte}
                                    .col-md-12.col-sm-12.col-xs-12
                                        section.panel
                                            .panel-body
                                                .row
                                                    .project_detail.col-md-4
                                                        p.title
                                                            b Nombre
                                                        p #{data.info.nombre}
                                                        p.title
                                                            b Correo
                                                        p #{data.info.correocliente}
                                                    .project_detail.col-md-4
                                                        p.title
                                                            b Telefono
                                                        p #{data.info.telefono1}
                                                        p.title
                                                            b Categoria
                                                        p
                                                            a(href="#") #{data.info.idcategoria}
                                                    .col-md-4.project_detail
                                                        p.title Propiedades
                                                        ul.list-unstyled.project_files
                                                            each props in data.propiedades
                                                                li
                                                                    a(href='')
                                                                        i.fa.fa-check-square
                                                                        |  #{props}
                                    .col-md-12
                                        section.panel
                                            .panel-body

                                                div
                                                    div#vdescription
                                                        p
                                                            | #{data.info.descripcion}
                                    .x_title
                                        h5 Fotos
                                            .fotos(style="display:flex;flex-wrap: wrap;justify-content: space-around; ")
                                                each foto in data.fiAdd
                                                        .foto
                                                            img(src="/file_local/?id=#{foto.idarchivo}.#{foto.tipo}",style="display:block;width :150px;height:150px;margin-top:10px;")

                                    //.x_title
                                        h5 Seguimiento

        div.print-wrap.page2
    script(src='../dist/jspdf.debug.js')
    script(src='../libs/html2pdf.js')
    //script.
        var pdf = new jsPDF('p', 'pt', 'a4');
        var options = {
            //pagesplit: true
        };
        //pdf.internal.scaleFactor = 1.75;
        pdf.addHTML(document.querySelector(".print-wrap.page1"), options, function () {
            pdf.save("test.pdf");
        });
    script.
        var pdfgen = function(){
            var pdf = new jsPDF('p', 'pt', 'letter');
            var canvas = pdf.canvas;
            canvas.height = $("#main").height();
            canvas.width = $("#main").width();

            var recibo = document.querySelector(".print-wrap.page1");

            html2canvas(recibo, {
                canvas: canvas,
                pagesplit: false,
                onrendered: function (canvas) {
                    console.log("guardandao");
                    pdf.save('reporte#{data.info.idreporte}.pdf');

                }
            });

        }

        function inpri(){
            $('#btns').hide();
            window.print();
            $('#btns').show();
        }